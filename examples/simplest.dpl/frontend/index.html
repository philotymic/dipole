<html>
  <head>
    <script src="./node_modules/ice/lib/Ice.js"></script>
    <script src="./gen-js/backend.js"></script>    
    <script>
      	let init_data = new Ice.InitializationData();
	let props = Ice.createProperties();
	props.setProperty("Ice.ACM.Close", "0");
	props.setProperty("oa.AdapterId", "dummy1");
	init_data.properties = props;
	window.ic = Ice.initialize(null, init_data);	
	console.log("Ice init done");
    </script>
    <script>
      function getBackendPort() {
       return new Promise((resolve, reject) => {
        // this function is defined in python
        dpl_getBackendPort("hello from js", (port) => {
         if (port) {
          resolve(port);
         } else {
          reject("getBackendPort returns null/undef");
         }
        });
       });
      }
    </script>
  </head>  
  <body>
    <div id="root"></div>
    <script src="public/bundle.js"></script>
  </body>
</html>
